---
import WrappedViewer from '../components/WrappedViewer';
import AgentChat from '../components/AgentChat';

// Obtener el 'player' de los query params de la URL
const player = Astro.url.searchParams.get('player');
const playerName = player ? player.replace("-", "#") : "Jugador";
---

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wrapped de {playerName}</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
	<meta name="generator" content={Astro.generator} />
</head>
<body class="bg-gray-900 text-white">
  <main class="container mx-auto px-4 py-8">
    {player ? (
      <>
        <h1 class="text-4xl font-bold text-center mb-8">Resumen Anual para <span class="text-blue-400">{playerName}</span></h1>
        <WrappedViewer client:only="react" playerIdentifier={player} />
        <AgentChat client:only="react" playerId={player} />
      </>
    ) : (
      <div class="text-center">
        <h1 class="text-2xl font-bold text-white">No se especific√≥ un jugador.</h1>
        <p class="text-gray-400">Por favor, vuelve al inicio y busca un jugador.</p>
        <a href="/" class="mt-4 inline-block px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700">Volver al Inicio</a>
      </div>
    )}
  </main>
</body>
</html>

